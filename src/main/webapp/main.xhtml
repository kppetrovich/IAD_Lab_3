<?xml version="1.0" encoding="UTF-8"?>
<!--
  Created by IntelliJ IDEA.
  domain.User: Pavel
  Date: 06.04.2019
  Time: 18:35
-->
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://java.sun.com/jsf/composite">


<h:head>
    <title>Lab_3</title>
    <h:outputStylesheet library="styles" name="main.css"/>
    <link rel="stylesheet" href="resources/styles/main.css" type="text/css"/>
    <h:outputScript library="scripts" name="validate.js"/>
    <h:outputScript library="scripts" name="draw.js"/>
</h:head>

<h:body styleClass="main">
    <f:view>
        <center>
            <div class="header_1">
                <table class="table_header_1">
                    <tr>
                        <td><label> Лаборатоная работа №3.</label></td>
                    </tr>
                </table>
            </div>
            <div class="header_2">
                <table class="table_header_2">
                    <tr>
                        <td/>
                        <td>Группа: P3202</td>
                    </tr>
                    <tr>
                        <td/>
                        <td>Вариант: 851108</td>
                    </tr>
                    <tr>
                        <td/>
                        <td>Выполнил: Куркин Павел Петрович</td>
                    </tr>
                </table>
            </div>
            <br/>
            <div class="container form" id="inputs">
                <h:button styleClass="moveToStart" value="Назад" outcome="index"/>
                <table class="input_table">
                    <tr>
                        <td>
                            <h:form class="form" id="form">
                                <table>
                                    <tr>
                                        <td><label id="choose"> Выбор значений:</label></td>
                                    </tr>
                                    <tr>
                                        <td id="rowX">
                                            <h:outputLabel class="label" value="&#8226; Координата X: "/>
                                            <h:outputText class="x_input" id="X_buttion" value="#{pointBean.x}"/>
                                            <br/>
                                            <h:commandButton class="input_X" value="-5" type="submit">
                                                <f:setPropertyActionListener target="#{pointBean.x}" value="-5"/>
                                            </h:commandButton>
                                            <h:commandButton class="input_X" value="-4" type="submit">
                                                <f:setPropertyActionListener target="#{pointBean.x}" value="-4"/>
                                            </h:commandButton>
                                            <h:commandButton class="input_X" value="-3" type="submit">
                                                <f:setPropertyActionListener target="#{pointBean.x}" value="-3"/>
                                            </h:commandButton>
                                            <h:commandButton class="input_X" value="-2" type="submit">
                                                <f:setPropertyActionListener target="#{pointBean.x}" value="-2"/>
                                            </h:commandButton>
                                            <h:commandButton class="input_X" value="-1" type="submit">
                                                <f:setPropertyActionListener target="#{pointBean.x}" value="-1"/>
                                            </h:commandButton>
                                            <h:commandButton class="input_X" value="0" type="submit">
                                                <f:setPropertyActionListener target="#{pointBean.x}" value="0"/>
                                            </h:commandButton>
                                            <h:commandButton class="input_X" value="1" type="submit">
                                                <f:setPropertyActionListener target="#{pointBean.x}" value="1"/>
                                            </h:commandButton>
                                            <h:commandButton class="input_X" value="2" type="submit">
                                                <f:setPropertyActionListener target="#{pointBean.x}" value="2"/>
                                            </h:commandButton>
                                            <h:commandButton class="input_X" value="3" type="submit">
                                                <f:setPropertyActionListener target="#{pointBean.x}" value="3"/>
                                            </h:commandButton>
                                        </td>
                                        <td style="width: 100px !important;"/>
                                        <td>
                                            <p:outputPanel id="graphPanel">
                                                <svg id="picture" width="454" height="206" onclick="getPoint(event)" xmlns="http://www.w3.org/2000/svg">
                                                    <defs>
                                                        <pattern id="image" patternUnits="userSpaceOnUse" width="454" height="206">
                                                            <image x="0" y="0" width="454" height="206" xlink:href="resources/images/picture.svg"/>
                                                        </pattern>
                                                    </defs>
                                                    <polygon points="0,0 454,0 454,206 0,206" fill="url(#image)"/>
                                                    <text id="picture_x" x="445" y="115" font-family="monospace" font-size="14" fill="gray">#{pointBean.r}</text>
                                                    <text id="picture_y" x="228" y="13" font-family="monospace" font-size="14" fill="gray">#{pointBean.r/2}</text>
                                                    <ui:repeat value="#{pointBean.points}" var="point">
                                                        <circle cx="#{217 / pointBean.r * pointBean.x + 227}" cy="#{206 - (186 / pointBean.r * point.y + 103)}" stroke="black" fill="#{pointBean.isInArea eq true ? 'green' : 'red'}" class="point" r="3"/>
                                                    </ui:repeat>
                                                </svg>

                                                <p:inputText type="hidden" id="hiddenX" value="#{pointBean.x}"/>
                                                <p:inputText type="hidden" id="hiddenY" value="#{pointBean.y}"/>
                                            </p:outputPanel>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td id="rowY">
                                            <h:outputLabel class="label" value="&#8226; Координата Y: "/><br/>
                                            <h:inputText class="input_Y" id="Y" a:placeholder="(-5;3)" maxlength="6"
                                                         name="Y"
                                                         value="#{pointBean.y}" onfocus="removeError();">
                                                <f:validateDoubleRange minumim="-3" maximum="5"/>
                                            </h:inputText><br/>
                                            <div id="error" class="error">
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <h:outputLabel class="label" value="&#8226; Радиус R: "/>
                                            <h:outputText class="input_R" id="R_text" value="#{pointBean.r}"/>
                                            <br/>
                                            <h:selectOneMenu value="#{pointBean.r}">
                                                <f:selectItem itemValue="1" itemLabel="1"/>
                                                <f:selectItem itemValue="2" itemLabel="2"/>
                                                <f:selectItem itemValue="3" itemLabel="3"/>
                                                <f:selectItem itemValue="4" itemLabel="4"/>
                                                <f:selectItem itemValue="5" itemLabel="5"/>
                                            </h:selectOneMenu>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <h:commandButton styleClass="buttonToMain" id="submit" value="Проверить"
                                                             action="#{pointBean.addPoint()}"/>
                                        </td>
                                    </tr>
                                </table>
                                <p:dataTable id="resultsTable" class="res" value="#{pointBean.points}"
                                             var="elem" paginator="true" rows="10"
                                             paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                                             rowsPerPageTemplate="5,10,15">

                                    <p:column headerText="X">
                                        <h:outputText value="#{elem.x}"/>
                                    </p:column>

                                    <p:column headerText="Y">
                                        <h:outputText value="#{elem.y}"/>
                                    </p:column>

                                    <p:column headerText="R">
                                        <h:outputText value="#{elem.r}"/>
                                    </p:column>

                                    <p:column headerText="IsHit">
                                        <h:outputText value="#{elem.hit}"/>
                                    </p:column>

                                </p:dataTable>
                            </h:form>


                        </td>
                    </tr>
                </table>

            </div>


            <br/>
        </center>
    </f:view>

</h:body>

</html>